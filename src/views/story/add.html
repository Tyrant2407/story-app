<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title><%= htmlWebpackPlugin.options.title %> | Story App</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <header>
      <nav class="navbar navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"><brandname-component></brandname-component></a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasDarkNavbar"
            aria-controls="offcanvasDarkNavbar"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div
            class="offcanvas offcanvas-end text-bg-dark"
            tabindex="-1"
            id="offcanvasDarkNavbar"
            aria-labelledby="offcanvasDarkNavbarLabel"
          >
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">Dark offcanvas</h5>
              <button
                type="button"
                class="btn-close btn-close-white"
                data-bs-dismiss="offcanvas"
                aria-label="Close"
              ></button>
            </div>
            <div class="offcanvas-body">
              <navlink-component></navlink-component>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <div class="main-content">
        <div class="container py-5">
          <alert-card></alert-card>
          <div class="card shadow-lg p-4">
            <spinner-load></spinner-load>
            <h1 class="mb-4 text-secondary text-center">Tambah Story</h1>

            <form class="row g-4" id="addRecordForm" novalidate>
              <div class="col-12 col-md-6">
                <label for="validationCustomName" class="form-label fs-5">Nama</label>
                <input
                  type="text"
                  class="form-control form-control-lg rounded-pill"
                  id="validationCustomName"
                  required
                />
                <div class="invalid-feedback">Wajib diisi</div>
              </div>
              <div class="col-12 col-md-6">
                <label for="validationCustomDate" class="form-label fs-5">Tanggal</label>
                <div class="input-group has-validation">
                  <input
                    type="datetime-local"
                    class="form-control form-control-lg rounded-pill"
                    id="validationCustomDate"
                    required
                  />
                  <div class="invalid-feedback">Wajib diisi</div>
                </div>
              </div>
              <div class="col-12 col-md-6">
                <label for="validationCustomDesc" class="form-label fs-5">Deskripsi</label>
                <textarea
                  class="form-control form-control-lg rounded-3"
                  id="validationCustomDesc"
                  rows="4"
                  required
                ></textarea>
                <div class="invalid-feedback">Wajib diisi</div>
              </div>
              <inputimage-component
                class="input-component-container input-component-root-class-name20"
                inputId="validationCustomEvidence"
                invalidFeedbackMessage="${msg(`Please upload a photo`)}"
                required
              ></inputimage-component>
              <div class="col-12 text-end">
                <button>
                  <a class="btn btn-lg btn-secondary rounded-pill px-5" type="submit">Submit</a>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <footer-component></footer-component>
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('addRecordForm');
        const spinner = document.querySelector('spinner-load');

        form.addEventListener('submit', async (event) => {
          event.preventDefault(); // Mencegah form dari submit default

          // Menampilkan spinner
          spinner.style.display = 'block';

          // Tunda eksekusi proses tambah data selama 2-3 detik
          setTimeout(async () => {
            try {
              // Ambil data dari form
              const formData = new FormData(form);
            } catch (error) {
              console.error('Error:', error);
              alert('Gagal menambahkan data');
            } finally {
              // Sembunyikan spinner setelah proses selesai
              spinner.style.display = 'none';
            }
          }, 2000); // Tunda 2 detik (2000 ms)
        });
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
